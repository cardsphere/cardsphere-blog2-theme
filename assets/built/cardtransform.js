window.jQuery(function(k){cardpeek("body",".cardpeek");function n(a){var e=k("code");k.each(e,function(e,t){"PRE"==t.parentElement.nodeName?function(e,t,r){var a=t.split("\n"),c=[],s=[],i=c;k.each(a,function(e,t){t=t.trim();var a=/\s*(\d+) (.*)/g.exec(t);if(a){var n=r[a[2].trim()];n&&i.push({quantity:a[1],resolved:n})}else 0<c.length&&""==t&&(i=s)});for(var n=c.reduce(function(e,t){var a=t.resolved.types[t.resolved.types.length-1];return e[a]=e[a]||[],e[a].push(t),e},Object.create(null)),l=k("<p/>",{class:"decklist"}),d=k("<ul/>",{class:"decklist-mainboard"}).appendTo(l),o=k("<ul/>",{class:"decklist-sideboard"}).appendTo(l),p={Planeswalker:1,Creature:2,Instant:3,Sorcery:4,Enchantment:5,Artifact:6,Land:7},u=Object.keys(n).sort(function(e,t){return p[t]<p[e]}),m=0;m<u.length;m++){var v=u[m],f=n[v];f.sort(function(e,t){return e.resolved.name>t.resolved.name});var h=k("<ul/>",{class:"decklist-mainboard-sublist decklist-mainboard-"+v.toLocaleLowerCase()}).appendTo(d);k.each(f,function(e,t){k("<li>",{class:"decklist-card"}).append([k("<span/>",{class:"decklist-card-quantity"}).text(t.quantity+"x "),k("<a/>",{href:t.resolved.url,class:"decklist-card-link cardpeek","data-image":t.resolved.image}).text(t.resolved.name)]).appendTo(h)})}k.each(s,function(e,t){k("<li>",{class:"decklist-card"}).append([k("<span/>",{class:"decklist-card-quantity"}).text(t.quantity+"x "),k("<a/>",{href:t.resolved.url,class:"decklist-card-link cardpeek","data-image":t.resolved.image}).text(t.resolved.name)]).appendTo(o)}),k(e).replaceWith(l)}(t.parentElement,t.textContent,a):function(e,t){var a=t[e.textContent.trim()];a&&k(e).replaceWith(k("<a/>",{href:a.url,class:"cardpeek","data-image":a.image}).text(a.name))}(t,a)})}var r,e;r=[],e=k("code"),k.each(e,function(e,t){"PRE"==t.parentElement.nodeName?function(e,n){var t=e.split("\n");k.each(t,function(e,t){var a=/\s*(\d+) (.*)/g.exec(t);a&&n.push(a[2].trim())})}(t.textContent,r):r.push(t.textContent.trim())}),k.ajax("https://www.cardsphere.com/rest/v1/cardinfo/resolve",{data:JSON.stringify(r),contentType:"application/json",type:"POST"}).done(function(e){for(var t={},a=0;a<r.length;a++)t[r[a]]=e[a];n(t)})});
//# sourceMappingURL=cardtransform.js.map