window.jQuery(function(x){cardpeek("body",".cardpeek");function n(t){var e=x("code");x.each(e,function(e,a){"PRE"==a.parentElement.nodeName?function(e,a,s){var t=a.split("\n"),r=[],c=[],l=r,d=!1;if(x.each(t,function(e,a){a=a.trim();var t=/\s*(\d+) (.*)/g.exec(a);if(t){var n=s[t[2].trim()];n?l.push({quantity:t[1],resolved:n}):d=!0}else 0<r.length&&""==a&&(l=c)}),d)y(e,a,s);else{for(var n=r.reduce(function(e,a){var t=a.resolved.types[a.resolved.types.length-1];return e[t]=e[t]||[],e[t].push(a),e},Object.create(null)),i=x("<p/>",{class:"decklist"}),o=x("<ul/>",{class:"decklist-mainboard"}).appendTo(i),p=x("<ul/>",{class:"decklist-sideboard"}).appendTo(i),u={Planeswalker:1,Creature:2,Instant:3,Sorcery:4,Enchantment:5,Artifact:6,Land:7},v=Object.keys(n).sort(function(e,a){return u[a]<u[e]}),k=0;k<v.length;k++){var m=v[k],f=n[m];f.sort(function(e,a){return e.resolved.name>a.resolved.name});var h=x("<ul/>",{class:"decklist-mainboard-sublist decklist-mainboard-"+m.toLocaleLowerCase()}).appendTo(o);x.each(f,function(e,a){x("<li>",{class:"decklist-card"}).append([x("<span/>",{class:"decklist-card-quantity"}).text(a.quantity+"x "),x("<a/>",{href:a.resolved.url,class:"decklist-card-link cardpeek","data-image":a.resolved.image}).text(a.resolved.name)]).appendTo(h)})}x.each(c,function(e,a){x("<li>",{class:"decklist-card"}).append([x("<span/>",{class:"decklist-card-quantity"}).text(a.quantity+"x "),x("<a/>",{href:a.resolved.url,class:"decklist-card-link cardpeek","data-image":a.resolved.image}).text(a.resolved.name)]).appendTo(p)}),x(e).replaceWith(i)}}(a.parentElement,a.textContent,t):function(e,a){var t=a[e.textContent.trim()];t?x(e).replaceWith(x("<a/>",{href:t.url,class:"cardpeek","data-image":t.image}).text(t.name)):x(e).replaceWith(x("<span/>",{}).text(e.textContent))}(a,t)})}var s,e,y=function(e,a,r){var t=a.split("\n"),c=[],l=[],d=c;x.each(t,function(e,a){a=a.trim();var t=/\s*(\d+) (.*)/g.exec(a);if(t){var n=t[2].trim(),s=r[n];s?d.push({quantity:t[1],resolved:s}):d.push({quantity:t[1],unresolved:n})}else 0<c.length&&""==a&&(d=l)});var n=x("<p/>",{class:"decklist"}),s=x("<ul/>",{class:"decklist-mainboard"}).appendTo(n),i=x("<ul/>",{class:"decklist-sideboard"}).appendTo(n);x.each(c,function(e,a){x("<li>",{class:"decklist-card"}).append([x("<span/>",{class:"decklist-card-quantity"}).text(a.quantity+"x "),a.resolved?x("<a/>",{href:a.resolved.url,class:"decklist-card-link cardpeek","data-image":a.resolved.image}).text(a.resolved.name):x("<span/>",{class:"decklist-card-link"}).text(a.unresolved)]).appendTo(s)}),x.each(l,function(e,a){x("<li>",{class:"decklist-card"}).append([x("<span/>",{class:"decklist-card-quantity"}).text(a.quantity+"x "),a.resolved?x("<a/>",{href:a.resolved.url,class:"decklist-card-link cardpeek","data-image":a.resolved.image}).text(a.resolved.name):x("<span/>",{class:"decklist-card-link"}).text(a.unresolved)]).appendTo(i)}),x(e).replaceWith(n)};s=[],e=x("code"),x.each(e,function(e,a){"PRE"==a.parentElement.nodeName?function(e,n){var a=e.split("\n");x.each(a,function(e,a){var t=/\s*(\d+) (.*)/g.exec(a);t&&n.push(t[2].trim())})}(a.textContent,s):s.push(a.textContent.trim())}),x.ajax("https://www.cardsphere.com/rest/v1/cardinfo/resolve",{data:JSON.stringify(s),contentType:"application/json",type:"POST"}).done(function(e){for(var a={},t=0;t<s.length;t++)a[s[t]]=e[t];n(a)})});
//# sourceMappingURL=cardtransform.js.map